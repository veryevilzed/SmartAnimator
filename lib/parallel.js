'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _lodash=require('lodash');var _lodash2=_interopRequireDefault(_lodash);var _animator=require('./animator.js');var _animator2=_interopRequireDefault(_animator);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var Parallel=function(){function Parallel(){var _this=this;var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var obj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;_classCallCheck(this,Parallel);this.params=_lodash2.default.extend({animators:[],run:false,autoAdd:true},params);if(obj!==undefined){this.params.obj=obj;}this.params.animators=_lodash2.default.map(this.params.animators,function(anim){if(anim instanceof _animator2.default||anim.params){return anim;}return new _animator2.default(_lodash2.default.extend(anim,{obj:_this.params.obj}));});this.run=this.params.run;if(this.run){this.start();}}_createClass(Parallel,[{key:'update',value:function update(df){if(!this.run){return;}_lodash2.default.forEach(this.params.animators,function(a){return a.update(df);});if(this.params.onUpdate){this.params.onUpdate(this);}}},{key:'__onComplete',value:function __onComplete(){if(this.params.onComplete&&_lodash2.default.filter(this.params.animators,function(a){return a.run===true;}).length===0){this.params.onComplete(this);this.run=false;}}},{key:'start',value:function start(){var _this2=this;this.run=true;_lodash2.default.forEach(this.params.animators,function(a){return a.start(function(){return _this2.__onComplete();});});return this;}},{key:'stop',value:function stop(){var applyTo=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.run=false;if(applyTo){_lodash2.default.forEach(this.params.animators,function(a){return a.stop(applyTo);});}return this;}}]);return Parallel;}();exports.default=Parallel;module.exports=exports['default'];